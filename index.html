<!DOCTYPE html>
<html>
<head>
    <title>Flask App</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // Function to fetch and update the log content
        function updateLogContent() {
            var currentURL = window.location.href;
            var logType = '';
    
            if (currentURL.includes('/info_log')) {
                logType = 'info_log';
            } else if (currentURL.includes('/debug_log')) {
                logType = 'debug_log';
            } else if (currentURL.includes('/error_log')) {
                logType = 'error_log';
            } else {
                return; // Do not update log content if the URL doesn't match any log types
            }
    
            var logContentURL = currentURL + '/log_content';
            $.ajax({
                url: logContentURL,
                method: 'GET',
                success: function(data) {
                    $('#log-content').html(data);  // Update the log content
                },
                error: function() {
                    console.log('Error occurred while fetching log content.');
                }
            });
        }
    
        // Update the log content every 1 second
        setInterval(updateLogContent, 1000);
    </script>    
</head>
<body>
    <h1>Flask App</h1>

    <h2>Available Actions</h2>
    <ul>
        <li><a href="/">Home</a></li>
        <li><a href="{{ url_for('run_preprocess') }}">Run New Preprocessing Job</a></li>
        <li><a href="{{ url_for('run_train') }}">Run New Training Job</a></li>
        <li><a href="{{ url_for('run_preprocess_train') }}">Run New Preprocessing + Training Job</a></li>
        <li><a href="{{ url_for('run_predict_demo', building_file='Stadium_Data_Extended.csv', y_column='present_elec_kwh') }}">Run New Demo Prediction Job</a></li>
    </ul>

    <h2>Job Logs</h2>
    <ul>
        <li><a href="{{ url_for('display_info_log', job_id=job_id) }}">Info Job Log: #{{ job_id }}</a></li>
        <li><a href="{{ url_for('display_debug_log', job_id=job_id) }}">Debug Job Log: #{{ job_id }}</a></li>
        <li><a href="{{ url_for('display_error_log', job_id=job_id) }}">Error Job Log: #{{ job_id }}</a></li>
    </ul>

    <h2>Log Content</h2>
    <pre id="log-content">
        {{ log_content | safe }}
    </pre>
</body>
</html>
